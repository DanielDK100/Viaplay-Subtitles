chrome.storage.sync.get(["vs_background","vs_text"],function(e){new(function(){const e=Symbol(),t=Symbol(),o=Symbol(),s=Symbol(),i=Symbol(),n=Symbol(),r=Symbol();class c{constructor(c,a,l,h,u,y,m){this[e]=c,this[t]=a,this[o]=l,this[s]=h,this[i]=u,this[n]=y,this[r]=m,this.initializeMessageListener(),this.setManifestData(this[e]),this.setMovieQuote(this[t].querySelector(".example-subtitle-cue p"),this[o]),this.setPopupColors(this[n],this[r]),this.initializeColorPicker(this[t].querySelector("#background"),this[r.vs_background],this[s]),this.initializeColorPicker(this[t].querySelector("#text"),this[r.vs_text],this[i])}static getInstance(e){return self=e}initializeMessageListener(){const e=c.getInstance(this);chrome.runtime.onMessage.addListener(function(o,r,c){o.color&&(chrome.storage.sync.get([e[s],e[i]],function(o){e[t].querySelector(`#${e[n]}`).innerHTML=e.setStyles(o)}),e.logColor(o.color))})}setManifestData(e){if(this[t].querySelector("#vs-container")){this[t].querySelectorAll(".vs-title").forEach(function(t){t.textContent=e.name}),this[t].querySelector(".vs-icon").src=e.icons[128],this[t].querySelector(".vs-icon").alt=e.name,this[t].querySelector(".vs-version").textContent=e.version}}setMovieQuote(e,t){if(e){const o=t[Math.floor(Math.random()*t.length)];e.textContent=o}}setPopupColors(e,o){const s=this[t].head;if(s){const i=this[t].createElement("style");i.type="text/css",i.id=e,i.appendChild(this[t].createTextNode(this.setStyles(o))),s.appendChild(i)}}initializeColorPicker(e,o,r){const a=c.getInstance(this);new Picker({parent:e,popup:"bottom",color:o,onDone:function(e){const o={};o[r]=e.hex,chrome.storage.sync.set(o,function(){chrome.storage.sync.get([a[s],a[i]],function(o){a[t].querySelector(`#${a[n]}`).innerHTML=a.setStyles(o),chrome.tabs.query({url:"*://*/*"},function(t){t&&t.forEach(function(t){chrome.tabs.sendMessage(t.id,{color:e.hex})})})})}),a.logColor(e.hex)}})}logColor(e){console.log(`%c ${e}`,`color: ${e}`)}setStyles(e){return`.subtitle-cue p, .example-subtitle-cue p {background: ${e.vs_background} !important; color: ${e.vs_text} !important;}`}}return c}())(chrome.runtime.getManifest(),document,movieQuotes=["I'm going to make him an offer he can't refuse.","May the Force be with you.","Mama always said life was like a box of chocolates. You never know what you're gonna get.","The first rule of Fight Club is you do not talk about Fight Club.","Houston, we have a problem.","Say hello to my little friend!","Snakes. Why'd it have to be snakes?","I see dead people.","Elementary, my dear Watson.","To infinity and beyond!"],"vs_background","vs_text","vs-style",e)});